<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.js"></script>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.js"></script>
    <link rel="stylesheet" href="stylesheets/style.css">
</head>
<style>
    #divElement{
        position: absolute;
        left: 25%;
        width: 50%;
    }â€‹
     #loginDiv{
         float: left;
         width: 49%;
     }
</style>
<body>

<script id="timeTemplate" type="text/x-jQuery-tmpl">
    <li>${time}</li>
</script>
<div style="height: 50px; margin-top: 0px;padding-top: 0px;top: 0px; background-color: darkblue">
    <h1 style="color: white;text-align:center">Web Page Behaviour logging application
        <a style="color: #00BFFF;float: right;padding-right: 10px" href="/">Logout</a> </h1>
</div>
<div id="divElement" style="background-color: white">
    <h1 style="text-align:center" id="welcomeuser">Welcome user_name</h1>

    <h2 style="text-align:center"><a target="_blank" id="stackoverflow" href="https://stackoverflow.com/questions/tagged/java?sort=frequent&pageSize=15">Stack Overflow</a></h2>
    <div style="text-align:center" >
        <h2 id="loginHistoryTitle">Login History</h2>
        <textarea id = "loginTextArea" rows="10" cols="70">
        </textarea>

        <h2 id="InteractionsTitle">User Interactions</h2>
        <textarea id = "actionsTextArea" rows="10" cols="70">

        </textarea>
        <br>
        <button onclick="getInteractionsFromDB()" style="text-align:center">Show/Refresh Interactions</button>
    </div>

    <h1 style="padding-left: 10px">Behavior Logging and Insights</h1>
    <ul>
        <li>UpVote and DownVote: These options are tracked and logged so that we get to know more about the user. Information such as his likes, dislikes about content of the answer, or if the user is not upvoting or downvoting the answers or questions it also means that user has read the it fully</li>
        <li>SubmitButton: This activity log tells us if user has more knowledge on the topics and is willing to share his/her thoughts and knowledge</li>
        <li>Questions: Questions that user is checking is logged. This will give us insights of user's topics of interests</li>
        <li>Favorites: User's activity of saving the question to his/her favorite lists will also gives insights of his/her interests</li>
        <li>Scroll: User's scroll in the webpage is tracked and logged. With this information we may know whether user is reading all the answers/questions and spending enought time reading the content in the screen. This will also contribute to his/her's interested topics</li>
        <li>Tags and Related Topics: Selections of tags in the webpages and clicking related topics links on the sides,  are tracked and logged. This will give us direct information of user's interested topics. This will enable us to recommend questions of his/her interest infuture</li>
        <li>Asking Questions and Answer in comments: By logging these two actions in the webpage, will give us insights of user's interest as well his/her's strong knowledge in particular topics</li>
        <li>Time: For all the above Interactions, time of the interaction is logged too. This will help in recommendations in future. Example, if user is at work during day time and is interested in only looking for answer's and during night time he/she has enough free time and answer's questions to topics user is strong at will help us recommending them at appropriate time</li>
    </ul>

</div>

</body>
<script>
    //document.cookie = "userName=user_name";
    //var value = $.cookie("obligations");
    console.log("cookie:"+document.cookie);
    $( document ).ready(function() {
        console.log(localStorage.getItem("userName"));
        var historyList = [];
        $.ajax({
            url: "/login/historyData",
            type:"POST",
            data:{'userName':'user_name'},
            success: function(historyData){
                //console.log("HistoryData: " + historyData);
                var strs = String(historyData);
                strs = strs.replace(/\|/g,'\n');
                document.getElementById("loginTextArea").value = strs;
            }
        });
    });

    function getInteractionsFromDB() {
        $.ajax({
            url: "/login/getInteractionsFromDB",
            type:"POST",
            success: function(actionsData){
                document.getElementById("actionsTextArea").value = actionsData;
            }
        });
    }
</script>
</html>